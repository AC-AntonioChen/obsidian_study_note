
### SQL 语法

#### 1. count 主键和 count 非主键结果会不同吗?
主键是不能存 NULL 值的，所以 count 主键代表统计表中所有行数据的数量。
而非主键是可以存 NULL 值的，所以 count 非主键统计的是表中这个列的非 NULL 值的数量。
#### 2. MySQL 内连接、外连接有什么区别?
内连接和外连接都是用于连表查询。
内连接是只返回两个表匹配的数据行，外连接可以返回两个表匹配和不匹配的数据行，外连接主要分为左连接和右连接。工程最佳实践上我们**应该用左连接**
·左连接返回左表中的所有行和右表中匹配的行，如果右表中没有匹配的行,则用 NULL 值填充。
·右连接返回右表中的所有行和左表中匹配的行，如果左表中没有匹配的行,则用 NULL 值填充
#### 3. 外连接时 on 和 where 过滤条件区别?
on 用于指定连接两个表的条件，通常用于指定两个表之间的关联条件，即连接条件，在连接时进行过滤，
where 用于指定过滤条件，对连接后的结果集进行进一步筛选。
#### 4. having 与 where 的区别?
在 GROUP BY 分组查询过程中，Where 是工作在 GROUP BY 之前，Where 是对分组之前的数据进行筛选，无法使用聚合函数，Having 是工作在 GROUP BY 之后，Having 主要对分组之后的数据进行筛选，可以使用聚合函数。
#### 5. EXISTS 和 IN 的区别是什么?
- in 是先执行内表，会把查询到内表数据缓存起来，然后会进行双重 for 循环，外层的 for 循环是遍历外表记录，内层的 for 循环是遍历内表记录,最后每一次 for 循环时在内存判断内表的记录与外表记录是否一致。
- exist 会 for 循环遍历外表的记录，每一次 for 循环都会进行一次内查询来判断数据是否匹配。
性能区别:
如果查询的两个表大小相当，那么用 in 和 exists 性能差别不大。
如果查询的两个表中一个是小表，一个是大表，IN 适合于外表大而内表小的情况，EXISTS 适合于外表小而内表大的情况。
![image.png](https://picgo-1324195593.cos.ap-guangzhou.myqcloud.com/picgo/20260102191315.png)

#### 6. mysql 的约束有哪些?

#### 7. delete、drop、truncate 有什么区别?

#### 8. 联合查询中 union 和 union all 的区别是什么?

#### 9. 数据库三大范式是什么？ 追问 1：范式设计是为了解决什么问题？追问 2：范式设计有什么缺点?

#### 10. count (*) 性能比 count (1) 好吗?

---

### 存储引擎

#### 11. 说一说执行一条查询 SQL 语句的全过程

#### 12. MySQL 存储引擎有哪些?

#### 13. MyISAM 和 InnoDB 存储引擎有什么区别?

#### 14. MySQL 为什么选择 InnoDB 作为默认引擎?

#### 15. 用 count (*) 哪个存储引擎会更快?

#### 16. NULL 值是如何存储的?

#### 17. char 和 varchar 有什么区别? 追问: 哪个性能更好?

#### 18. 假如说一个字段是 varchar（10），但它其实只有 6 个字节，那他在内存中占的存储空间是多少？ 在文件中占的存储空间是多少？

#### 19. 如果硬件内存特别大, MySQL 缓存能否替代 redis?

---

### 索引结构

#### 20. MySQL 有哪些索引类型?

#### 21. InnoDB 引擎的索引数据结构是什么?

#### 22. B+树的特性是什么?

#### 23. B+ 和 B 树有什么区别?

#### 24. MySQL 为什么使用 B+ 树?

#### 25. 为什么索引用 B+ 树? 而不用红黑树?

#### 26. 为什么索引用 B+ 树? 而不用 B 树?

#### 27. 为什么索引用 B+ 树? 而不用哈希表?

#### 28. B+ 树有什么优点和缺点?

#### 29. 聚簇索引和非聚簇索引有什么区别?

#### 30. 什么是覆盖索引?

#### 31. 什么情况下会回表?

#### 32. insert 操作对 B+ 树结构的改变是怎么样的?

#### 33. 假如一张表有两千万的数据，B+树的高度是多少？ 怎么算的?

---

### 索引应用

#### 34. MySQL 有哪些索引?

#### 35. MySQL 主键是聚簇索引吗?

#### 36. 主键为什么不推荐有业务含义?

#### 37. 主键是用自增还是 UUID?

#### 38. 普通索引和唯一索引有什么区别？ 哪个更新性能更好？

#### 39. 主键怎么设置？追问：假如你不设置会怎么样?

#### 40. 介绍一下什么是外键约束?

#### 41. 外键有什么优劣势?

#### 42. 为什么要建索引?

#### 43. 我们一般选择什么样的字段来建立索引?

#### 44. 索引越多越好吗?

#### 45. 什么时候不用索引更好？

#### 46. 字段为什么要定义为 NOT NULL?

#### 47. 索引怎么优化?

#### 48. 建立了索引，查询的时候一定会用到索引吗?

#### 49. 如果我定义了一个 varchar 类型的日期字段，并且有一个数据是 '20230922'，如果查询的 where 条件是 `where time=20230922` 不加单引号，还会命中索引吗? 为什么?

#### 50. MySQL 最新版本解决了索引失效的哪些情况了吗?

#### 51. 什么是最左匹配原则?

#### 52. 建立联合索引有什么需要注意的？

#### 53. 了解索引下推吗？什么情况下会下推到引擎去处理?

#### 54. 联合索引 (a, b, c)，下面的查询语句会不会走索引？如果走具体是哪些字段能走？

#### 55. `where a>1 and b=2 and c<3` 怎么建立索引?

#### 56. `where a=? and b=? order by c` 怎么建立索引?

#### 57. `where a>100 and b=100 and c=123 order by d` 怎么建立联合索引?

#### 58. `select b from table where a=10 and c>20` 怎么创建索引?

#### 59. `select id, name from XX where age > 10 and name like 'xx%'`, 有联合索引 (name, age), 说一下查询过程

#### 60. `where id NOT IN (2, ?, ?)` 会走索引吗?

#### 61. 如果查询条件中包含索引列和非索引列，MySQL 的具体查询流程是什么样的?

---

### 事务

#### 62. MySQL 事务有什么特性?

#### 63. 事务的隔离性如何保证？

#### 64. 事务的持久性如何保证？

#### 65. 事务的原子性如何保证？

#### 66. MySQL 事务和 Redis 事务有什么区别?

#### 67. MySQL 事务隔离级别有哪些？ 分别解决哪些问题?

#### 68. 串行化隔离级别是通过什么实现的?

#### 89. 两条更新语句更新同一条记录，加的是什么锁?

#### 90. 两条更新语句更新同一条记录的不同字段，加的是什么锁？

#### 91. 可重复读场景，下面的场景会发生什么?

#### 92. 了解过 MySQL 死锁问题吗?

#### 93. MySQL 怎么排查死锁问题?

#### 94. MySQL 怎么避免死锁?

---

### 日志

#### 95. MySQL 三大日志是什么？

#### 96. redo log 和 binlog 的区别和应用场景?

#### 97. redo log 和 binlog 在恢复数据库有什么区别?

#### 98. 为什么崩溃恢复不用 binlog 而用 redo log?

#### 99. binlog 的三种格式是什么?

#### 100. redo log 是怎么实现持久化的?

#### 101. redo log 除了崩溃恢复还有什么其他作用?

#### 102. 为什么需要两阶段提交？

#### 103. 两阶段提交的过程？

#### 104. redo log 刷盘策略有哪三种?

---

### 性能调优

#### 105. 怎么查看一条语句是否走了索引?

#### 106. extra 字段中的 using index 和 using where 的区别?

#### 107. 怎么找到慢 SQL?

#### 108. 如何优化慢 SQL?

#### 109. 深分页场景如何优化?

#### 110. 如果 SQL 和索引都没问题, 查询还是很慢怎么办?

---

### 数据库选型

#### 111. SQL 和 NoSQL 数据库有什么区别?

#### 112. MySQL 和 MongoDB 之间怎么选型?

---

### 高可用

#### 113. MySQL 主从复制的过程是怎么样?

#### 114. MySQL 提供了几种复制模式? 默认的复制模式是什么?

#### 115. MySQL 主从复制的数据延迟怎么解决?

#### 116. MySQL 主从架构中，读写分离怎么实现?

#### 117. MySQL 主库挂了怎么办?

#### 118. 什么是分库分表？什么时候需要分表？什么时候需要分库？

#### 119. 分库分表后，会产生什么问题？怎么解决?
