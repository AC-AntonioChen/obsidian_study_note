### 事务隔离级别实现
1. **原子性 (Atomicity)**：要么成功要么失败。👉 **Undo Log** 保证。
    
2. **持久性 (Durability)**：断电也不丢数据。👉 **Redo Log** 保证。
    
3. **隔离性 (Isolation)**：并发互不干扰。👉 **MVCC + 锁** 保证（今天的重点）。
    
4. **一致性 (Consistency)**：最终目标，由上面三个共同保证。

#### 并发典型问题
- **场景**：你要给我转 100 万。
    
    1. 你的余额 -100万。
        
    2. 我的余额 +100万。
1. **脏读 (Dirty Read)**：我读到了你**还没提交**的数据。
    
    - 例子：你给我转了 100 万（未提交），我看到了余额多 100 万，结果你回滚了。我白高兴一场。
        
2. **不可重复读 (Non-repeatable Read)**：我在一个事务里，两次读同一个数据，结果**不一样**。
    
    - 例子：我第一次查余额是 0，你给我转账并提交了，我第二次查变成了 100 万。这导致我计算混乱。
        
3. **幻读 (Phantom Read)**：我在一个事务里，两次查询**记录数量**不一样。
    
    - 例子：我查账发现有 5 笔 100 万以上的存款。你又存了一笔。我再查发现变成了 6 笔。像产生了幻觉。