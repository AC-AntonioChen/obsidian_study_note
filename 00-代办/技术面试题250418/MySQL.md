## 1 MySQL 基础架构
### 1.1 说说 MySQL 的架构？
Mysql的架构分两层，server层和存储引擎层。
server层组件：
（1）连接器：用于管理客户端client连接，这个客户端在java业务里一般就是mysql提供的jdbc。连接器会验证用户的身份和权限。
（2）查询缓存：用于缓存查询结果，Mysql8.0后因命中率低被废弃。若启用，先检查缓存命中，未命中则进入后续流程。
（3）分析器：对sql进行词法分析（解析SQL关键词、表名）、语法分析（验证语法正确性），如果没问题则将SQL文本对应的解析树下发给预处理器
（4）预处理器：通常被归类为分析器的一部分，对解析树进行进一步的预处理（也就是语义分析），如检查表/列是否存在、展开`*`、处理别名等。将预处理后的解析树下发给优化器
（5）优化器：根据解析树和数据库统计信息生成高效的执行计划（如索引选择、JOIN顺序），将执行计划传递给执行器
（6）执行器：先检查用户对表的操作权限，再调用存储引擎接口执行查询，处理排序/分页等逻辑。如果开启了binlog还会记录binlog日志（记录数据库的‌**逻辑操作**）。
存储引擎层：负责对数据的存储、检索和维护。存储引擎是可插拔的，常见的有MyIsam，innodb（mysql5.5后的默认引擎）

执行器通过 Handler API 与存储引擎交互，InnoDB 支持事务/行锁，MyISAM 仅表锁。


### 1.2 一条 SQL语句在MySQL中的执行过程
一条sql首先会经由客户端发送给mysql server，server的连接层会先验证用户身份，校验用户的权限。如果开启了查询缓存，sql会先查是否命中缓存，命中则直接返回。如果没命中或者没开查询缓存，sql文本将会传递给分析器。查询缓存在mysql8后被移除
分析器会对sql文本进行词法分析和语法分析，生成对应解析树，预处理器会对解析树进行进一步预处理，比如别名处理，展开星号，检查表列是否存在，最终将预处理完毕的解析树传递给优化器。
优化器会根据解析树和数据库情况选择高效的执行计划，这个高效是指选择更优的索引、JOIN顺序，随后将执行计划传递给执行器。
执行器会先校验用户对表的操作权限，然后再调用handler api将执行计划下发给存储引擎执行，对返回的结果进行后处理，比如排序分页等。如果开了binlog，执行器还会记录binlog。
存储引擎层的具体执行过程要看使用的存储引擎，常用的比如innodb，会通过B+树索引定位数据，通过undo log 实现多版本并发控制（也就是MVCC），并记录redo log保证事务持久性，mysql会通过两阶段提交协议协调确保Binlog和redolog的一致性。如果是MyISAM，则会直接读取表文件，而且不支持事务。


## 2 MySQL存储引擎
### 2.1 MySQL 提供了哪些存储引擎？
提供了InnoDB、MyISAM、Archive、Memory、CSV存储引擎
InnoDB：自从Mysql5.5后成为默认引擎，支持事务，行锁，MVCC（多版本并发控制），通过redo/undo log来保障ACID

### 2.2 MySQL 存储引擎架构了解吗?

### 2.3 MylSAM 和 InnoDB 的区别

## 3 MySQL 事务
### 3.1 何谓事务

### 3.2 何谓数据库事务？

### 3.3 ACID 特性指的是什么?

### 3.4 并发事务带来了哪些问题？
### 3.5 不可重复读和幻读区别
### 3.6 SQL标准定义了哪些事务隔离级别？
### 3.7 MySQL的默认隔离级别是什么?能解决幻读问题吗
### 3.8 什么是MVCC？有什么用？原理了解吗
### 3.9 InnoDB事务隔离级别实现原理
## 4 MySQL锁
### 4.1 表级锁和行级锁了解吗？有什么区别
### 4.2 行级锁的使用有什么注意事项？
### 4.3 共享锁和排他锁呢？
### 4.4 意向锁有什么作用？
### 4.5 InnoDB 有哪几类行锁?

## 5 MySQL 索引
### 5.1 何为索引？有什么作用？
### 5.2 索引的优缺点
### 5.3 索引的底层数据结构
### 5.4 MySQL 的索引结构为什么使用 B+树
### 5.5 主键索引和二级索引
### 5.6 聚集索引与非聚集索引
### 5.7 覆盖索引
### 5.8 联合索引
### 5.9 最左前缀匹配原则
### 5.10 创建索引的注意事项有哪些？
## 6 MySQL 日志
### 6.1 MySQL 中常见的日志有哪些?
### 6.2 慢查询日志有什么用？
### 6.3 binlog 主要记录了什么？有什么用
### 6.4 redo log 如何保证事务的持久性？
### 6.5 页修改之后为什么不直接刷盘呢
### 6.6 binlog 和 redolog 有什么区别?
### 6.7 undolog如何保证事务的原子性
## 7 性能优化
### 7.1 SQL 优化
### 7.2 慢查询问题排查
